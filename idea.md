# Идеи для улучшения бота

- Закрыть рекурсивный вызов `add_observation`/`enhanced_add_observation` (лог из `Document.md`): единый вход, защита от NameError и цикл‑детектор в памяти.
- Добавить самодиагностику запуска: проверка webhook/token, прогрев моделей, алерт при падении проактивных агентов.
- Усилить память и знания: дедупликация и сжатие длинных логов, TTL для устаревших событий, извлечение сущностей и связей в `knowledge_base.json`.
- Модернизировать аналитику: трекинг цепочек действий, корреляция ошибок с контекстом (модель, пользователь, ветка кода), weekly‑репорт с топ‑инцидентами.
- Улучшить диалоговый UX: краткое резюме контекста в начале сессии, уточняющие вопросы при недостающих данных, fallback‑ответы без галлюцинаций.
- Повысить надежность: rate limit и квоты, защита от повторной обработки апдейтов, таймауты/ретраи для внешних запросов.
- Автообслуживание: регулярный прогон тестов и статического анализа, проверка схемы конфигов, ротация логов и контроль размера `messages.db`.
